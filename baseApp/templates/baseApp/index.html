{% extends "baseApp/base.html" %}

{% block title %} <title> Home </title> {% endblock %}   
 
{% block content %}

<diV class="container-fluid">

  <section class="section section-search">
    <div class="container-fluid">
      <div class="banner-wrapper">
        <div class="banner-header text-center">
          <h1>Find Doctors, Book Appointments</h1>
          <p>We help you <span style="font-style:italic; color: green;"> Discover Top Medical Services Near You</span></p>
        </div>
                     
        <!-- Search -->
        <div class="search-box">
          <form action="">
            <div class="form-group search-location">
              <input type="text" class="form-control" placeholder="Search Location">
              
            </div>
            <div class="form-group search-info">
              <input type="text" class="form-control" placeholder="Search Doctors, Clinics, Hospitals, Diseases Etc">
              
            </div>
            <button type="submit" class="btn btn-primary search-btn"><i class="fa fa-search" aria-hidden="true"></i> <span> Search</span></button>
          </form>
        </div>
        <!-- /Search -->
        
      </div>
    </div>
  </section>



    <section class="search-section">
      <div class="px-4 py-5 my-5 text-center">
        <form class="form-search" action="{% url 'home' %}" method="GET">
          <div class="row">
            <div class="col-md-4 py-5">
              <input class="form-control" type="text" name="specification" placeholder="Doctor Specification" id="spec">
            </div>
            <div class="col-md-4 py-5">
              <input class="form-control" type="text" name="address" placeholder="Location" id="address">
            </div>
            <div class="col-md-4 py-5">
              <input class="btn btn-primary" type="submit" value="Search" name="search" id="search">
            </div>
          </div>
        </form>
        
             
         
      </div>  <p class="error-message" style="text-align: center; color: brown; margin-top: -60px;" id="message"></p>
    </section>
 
    
    <!--where doctors in specified place will appear---------------------------------------------------->
 {% if search_pressed %}
    <section class="hidden1">
    <div class="container px-4 py-5" id="icon-grid">
      <h2 class="pb-2 border-bottom"> {{ search_pressed }} </h2> 
           
      <div class="row row-cols-1 row-cols-sm-2 row-cols-md-3 row-cols-lg-4 g-4 py-5">

        {% for item in locDoctors %}
        <div class="col d-flex align-items-start" style="border: 1rem; padding: 1rem;">

          <img src="{{ item.image.url }}" alt="my image" style="float:left;  width: 1in; height: 1.2in;"/>

          <div>
          <h5 class="doct-n">{{ item.full_name }}</h5>
          <h6 class="doc-s">{{ item.specialization }}</h6>
          <h6 class="doc-s">{{ item.address }}</h6>
          
          <div id="rating-container">
                                   
           
            {% for i in rating %}
                {% if i.doctor == item %}

                <div class="stars" value="{{ i.rating }}"> </div>
                                                                     
                {% endif %}
            {% endfor %}
          </div>
        
          </div>

          
        
        </div>
        <!--JavaScript to varidate inputs 
        -->
      {% endfor %}

               
      </div>
      {% if message %}
      <div class="alert alert-warning" style="margin-top: -30px;">
        <p class="message" style="text-align: center;">{{ message }}</p>
      </div>
  {% endif %} 
    </div>
   </section>
   {% endif %}
  <!--                      +================================================+                        -->
    <!--end search sections-->
    <section style=" border-style: groove;
    border-width: 1px;
    border-color: #ccc;">
        <div class="container px-4 py-5" id="icon-grid">
            <h2 class="pb-2 border-bottom"> Best Rated Doctors </h2> 
                 
            <div class="row row-cols-1 row-cols-sm-2 row-cols-md-3 row-cols-lg-4 g-4 py-5">

              {% for item in doctors %}
              <a class="doctorview-a" href="{% url 'doctorview' %}">
              <div class="col d-flex align-items-start">

                <img src="{{ item.image.url }}" alt="my image" style="float:left; margin: 2px;  width: 1in; height: 1.2in;"/>

                <div>
                <h5 class="doct-n">{{ item.full_name }}</h5>
                <h6 class="doc-s">{{ item.specialization }}</h6>
                <h6 class="doc-s">{{ item.address }}</h6>
                
                <div id="rating-container">
                                         
                 
                  {% for i in rating %}
                      {% if i.doctor == item %}

                      <div class="stars" value="{{ i.rating }}"> </div>
                                                                           
                      {% endif %}
                
                  {% endfor %}
                </div>
              
                </div>

                
              
              </div>
                     </a>   

              {% endfor %}

                              
            </div>
          </div>
         
    </section>
    <script>
      // Assume you have a variable called 'rating' with the rating value retrieved from the database
                
      const starContainers = document.querySelectorAll(".stars");

      starContainers.forEach(container => {
      const rating = parseInt(container.getAttribute("value"));

    for (let i = 0; i < 5; i++) {
    const star = document.createElement("span");
    star.classList.add("star");

    if (i < rating) {
      star.classList.add("full-star");
    }

    star.innerHTML = "&#9733;";
    container.appendChild(star);
  }
});

                 
   </script>

   

</diV>
{% endblock %}
